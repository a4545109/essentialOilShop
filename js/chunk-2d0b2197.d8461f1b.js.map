{"version":3,"sources":["webpack:///./src/views/frontend/Cart.vue?d285","webpack:///src/views/frontend/Cart.vue","webpack:///./src/views/frontend/Cart.vue?b128","webpack:///./src/views/frontend/Cart.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","isLoading","on","$event","_m","staticClass","carts","length","removeAllCarts","_v","staticStyle","_l","item","key","product","id","removeItemCart","imageUrl","_s","title","quantity","updateQuantity","status","loadingItem","_e","directives","name","rawName","value","expression","domProps","target","composing","$set","unit","_f","price","coupon_code","addCoupon","cartTotal","coupon","percent","parseInt","continueShopping","nextStep","staticRenderFns","data","methods","getCarts","$http","get","url","patch","cart","updateTotal","forEach","delete","post","$router","push","created","component"],"mappings":"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","file":"js/chunk-2d0b2197.d8461f1b.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('loading',{attrs:{\"active\":_vm.isLoading},on:{\"update:active\":function($event){_vm.isLoading=$event}}}),_vm._m(0),_c('div',{staticClass:\"container\"},[(_vm.carts.length > 0)?_c('div',{staticClass:\"row d-flex justify-content-center\"},[_c('div',{staticClass:\"col-md-10\"},[_c('div',{staticClass:\"text-right mb-3\"},[_c('button',{staticClass:\"btn btn-outline-danger\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.removeAllCarts}},[_vm._v(\" 刪除所有品項 \"),_c('i',{staticClass:\"far fa-trash-alt\"})])]),_c('div',{staticClass:\"table-responsive\",staticStyle:{\"white-space\":\"nowrap\"}},[_c('table',{staticClass:\"table\"},[_vm._m(1),_c('tbody',{staticClass:\"text-center\"},_vm._l((_vm.carts),function(item){return _c('tr',{key:item.product.id + 1},[_c('td',{staticClass:\"align-middle\"},[_c('div',{staticClass:\"delete\"},[_c('i',{staticClass:\"fas fa-minus-circle\",on:{\"click\":function($event){return _vm.removeItemCart(item.product.id)}}})])]),_c('td',{staticClass:\"thumbnail\"},[_c('img',{attrs:{\"src\":item.product.imageUrl,\"alt\":\"產品縮圖\"}})]),_c('td',{staticClass:\"align-middle productName\"},[_vm._v(_vm._s(item.product.title))]),_c('td',{staticClass:\"align-middle\"},[_c('div',{staticClass:\"input-group\"},[_c('div',{staticClass:\"input-group-append numberBox\"},[_c('button',{staticClass:\"btn btn-outline-primary\",attrs:{\"type\":\"button\",\"disabled\":item.quantity ===1},on:{\"click\":function($event){item.quantity --; _vm.updateQuantity(item.product.id, item.quantity)}}},[_vm._v(\"- \"),(_vm.status.loadingItem === item.id)?_c('span',{staticClass:\"spinner-grow spinner-grow-sm\",attrs:{\"role\":\"status\",\"aria-hidden\":\"true\"}}):_vm._e()])]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(item.quantity),expression:\"item.quantity\"}],staticClass:\"form-control text-center\",attrs:{\"type\":\"number\",\"min\":\"1\"},domProps:{\"value\":(item.quantity)},on:{\"change\":function($event){return _vm.updateQuantity(item.product.id, item.quantity)},\"input\":function($event){if($event.target.composing){ return; }_vm.$set(item, \"quantity\", $event.target.value)}}}),_c('div',{staticClass:\"input-group-prepend numberBox\"},[_c('button',{staticClass:\"btn btn-outline-primary\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){item.quantity ++; _vm.updateQuantity(item.product.id, item.quantity)}}},[_vm._v(\"+ \"),(_vm.status.loadingItem === item.id)?_c('span',{staticClass:\"spinner-grow spinner-grow-sm\",attrs:{\"role\":\"status\",\"aria-hidden\":\"true\"}}):_vm._e()])])])]),_c('td',{staticClass:\"align-middle unit\"},[_vm._v(_vm._s(item.product.unit))]),_c('td',{staticClass:\"align-middle text-right\"},[_vm._v(_vm._s(_vm._f(\"thousands\")(item.product.price)))])])}),0)])]),_c('div',{staticClass:\"row d-flex flex-row-reverse\"},[_c('div',{staticClass:\"col-md-6\"},[_c('div',{staticClass:\"input-group mb-3 input-group-sm\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.coupon_code),expression:\"coupon_code\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"placeholder\":\"請輸入優惠碼\"},domProps:{\"value\":(_vm.coupon_code)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.coupon_code=$event.target.value}}}),_c('div',{staticClass:\"input-group-append\"},[_c('button',{staticClass:\"btn btn-outline-secondary\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.addCoupon}},[_vm._v(\" 套用優惠碼 \")])])])])]),_c('div',{staticClass:\"row d-flex flex-row-reverse mt-2 mb-2\"},[_c('div',{staticClass:\"col-md-4\"},[_c('div',{staticClass:\"totalCost d-flex justify-content-between pr-1\"},[_c('span',{staticClass:\"d-inline mr-3\"},[_vm._v(\"消費總計\")]),_c('span',[_vm._v(\"NT\"+_vm._s(_vm._f(\"thousands\")(_vm.cartTotal)))])]),_c('div',{staticClass:\"totalDiscount d-flex justify-content-between pr-1\"},[_c('span',{staticClass:\"d-inline text-success mr-3\"},[_vm._v(\"優惠折扣\")]),_c('span',{staticClass:\"text-success\"},[_vm._v(\"NT\"+_vm._s(_vm._f(\"thousands\")(_vm.cartTotal - (_vm.cartTotal * (_vm.coupon.percent / 100)) || 0)))])])])]),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-12\"},[_c('div',{staticClass:\"totalAmount p-2\"},[_c('p',{staticClass:\"text-right\"},[_vm._v(\"訂單內有 \"),_c('span',{staticClass:\"text-danger\"},[_vm._v(_vm._s(_vm.quantity))]),_vm._v(\" 件商品， \"),_c('span',[_vm._v(\"本筆訂單總金額 \"),_c('span',{staticClass:\"text-danger\"},[_vm._v(_vm._s(_vm._f(\"thousands\")(parseInt(_vm.cartTotal * (_vm.coupon.percent / 100)) || _vm.cartTotal)))])])])])])]),_c('div',{staticClass:\"row mt-3 mb-5\"},[_c('div',{staticClass:\"col-12\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-6\"},[_c('button',{staticClass:\"btn btn-primary btn-block text-white rounded-0\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.continueShopping}},[_vm._v(\" 繼續購物 \")])]),_c('div',{staticClass:\"col-6\"},[_c('button',{staticClass:\"btn btn-secondary text-white btn-block rounded-0\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.nextStep}},[_vm._v(\" 下一步 \")])])])])])])]):_c('div',{staticClass:\"emptyCarts d-flex justify-content-center my-7\"},[_c('h4',{staticClass:\"mb-3 warning-text\"},[_vm._v(\"哎唷 ! 購物車無商品，快去逛逛 \"),_c('router-link',{staticClass:\"text-dark mt-5 mt-3\",attrs:{\"to\":\"/products\"}},[_c('i',{staticClass:\"fas fa-chevron-left mr-2\"}),_vm._v(\" 繼續購物 \")])],1)])])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container pt-5 mb-5\"},[_c('div',{staticClass:\"row d-flex justify-content-center\"},[_c('div',{staticClass:\"col-12 col-sm-10\"},[_c('ul',{staticClass:\"setp d-flex justify-content-between\"},[_c('li',{staticClass:\"setp-item active bg-primary text-white\"},[_c('div',{staticClass:\"stepContent\"},[_c('span',{staticClass:\"text-center\"},[_vm._v(\"STEP1\")]),_c('br'),_c('span',[_vm._v(\"購物清單\")])])]),_c('li',{staticClass:\"setp-item\"},[_c('div',{staticClass:\"stepContent\"},[_c('span',{staticClass:\"text-center\"},[_vm._v(\"STEP2\")]),_c('br'),_c('span',[_vm._v(\"填寫資料\")])])]),_c('li',{staticClass:\"setp-item\"},[_c('div',{staticClass:\"stepContent\"},[_c('span',{staticClass:\"text-center\"},[_vm._v(\"STEP3\")]),_c('br'),_c('span',[_vm._v(\"成功結帳\")])])])])])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('thead',{staticClass:\"cartTableTitle text-center font-weight-bold table-borderless\"},[_c('th',[_vm._v(\"刪除\")]),_c('th',{staticClass:\"thumbnail\"},[_vm._v(\"縮圖\")]),_c('th',[_vm._v(\"商品名稱\")]),_c('th',{staticClass:\"cartNum\"},[_vm._v(\"數量\")]),_c('th',{staticClass:\"unit\"},[_vm._v(\"單位\")]),_c('th',[_vm._v(\"單價\")])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n  <!-- loading 套件 -->\r\n    <loading :active.sync=\"isLoading\"></loading>\r\n    <!-- step -->\r\n    <div class=\"container pt-5 mb-5\">\r\n      <div class=\"row d-flex justify-content-center\">\r\n        <div class=\"col-12 col-sm-10\">\r\n          <ul class=\"setp d-flex justify-content-between\">\r\n              <li class=\"setp-item active bg-primary text-white\">\r\n                <div class=\"stepContent\">\r\n                  <span class=\"text-center\">STEP1</span><br>\r\n                  <span>購物清單</span>\r\n                </div>\r\n              </li>\r\n              <li class=\"setp-item\">\r\n                <div class=\"stepContent\">\r\n                  <span class=\"text-center\">STEP2</span><br>\r\n                  <span>填寫資料</span>\r\n                </div>\r\n              </li>\r\n              <li class=\"setp-item\">\r\n                <div class=\"stepContent\">\r\n                  <span class=\"text-center\">STEP3</span><br>\r\n                  <span>成功結帳</span>\r\n                </div>\r\n              </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"container\">\r\n      <div class=\"row d-flex justify-content-center\" v-if=\"carts.length > 0\">\r\n        <div class=\"col-md-10\">\r\n          <div class=\"text-right mb-3\">\r\n            <button type=\"button\" class=\"btn btn-outline-danger\" @click=\"removeAllCarts\">\r\n                刪除所有品項 <i class=\"far fa-trash-alt\"></i>\r\n            </button>\r\n          </div>\r\n          <!-- 清單 -->\r\n          <div class=\"table-responsive\" style=\"white-space :nowrap;\">\r\n            <table class=\"table\">\r\n                <thead class=\"cartTableTitle text-center font-weight-bold table-borderless\">\r\n                  <th>刪除</th>\r\n                  <th class=\"thumbnail\">縮圖</th>\r\n                  <th>商品名稱</th>\r\n                  <th class=\"cartNum\">數量</th>\r\n                  <th class=\"unit\">單位</th>\r\n                  <th>單價</th>\r\n                </thead>\r\n                <tbody class=\"text-center\">\r\n                  <tr v-for=\"item in carts\" :key=\"item.product.id + 1\">\r\n                    <td class=\"align-middle\">\r\n                      <div class=\"delete\">\r\n                          <i class=\"fas fa-minus-circle\" @click=\"removeItemCart(item.product.id)\"></i>\r\n                      </div>\r\n                    </td>\r\n                    <td class=\"thumbnail\"><img :src=\"item.product.imageUrl\" alt=\"產品縮圖\"></td>\r\n                    <td class=\"align-middle productName\">{{ item.product.title }}</td>\r\n                    <td class=\"align-middle\">\r\n                        <div class=\"input-group\">\r\n                            <div class=\"input-group-append numberBox\">\r\n                                <button type=\"button\" class=\"btn btn-outline-primary\"\r\n                                @click=\"item.quantity --; updateQuantity(item.product.id, item.quantity)\"\r\n                                :disabled=\"item.quantity ===1\">-\r\n                                <span class=\"spinner-grow spinner-grow-sm\" role=\"status\" aria-hidden=\"true\"\r\n                                  v-if=\"status.loadingItem === item.id\"></span>\r\n                                </button>\r\n                            </div>\r\n                            <input type=\"number\" class=\"form-control text-center\" v-model=\"item.quantity\" min=1\r\n                              @change=\"updateQuantity(item.product.id, item.quantity)\">\r\n                            <div class=\"input-group-prepend numberBox\">\r\n                                <button type=\"button\" class=\"btn btn-outline-primary\"\r\n                                @click=\"item.quantity ++; updateQuantity(item.product.id, item.quantity)\">+\r\n                                <span class=\"spinner-grow spinner-grow-sm\" role=\"status\" aria-hidden=\"true\"\r\n                                  v-if=\"status.loadingItem === item.id\"></span>\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </td>\r\n                    <td class=\"align-middle unit\">{{ item.product.unit }}</td>\r\n                    <td class=\"align-middle text-right\">{{ item.product.price | thousands }}</td>\r\n                  </tr>\r\n                </tbody>\r\n            </table>\r\n          </div>\r\n          <!-- 套用優惠碼 -->\r\n          <div class=\"row d-flex flex-row-reverse\">\r\n            <div class=\"col-md-6\">\r\n                <div class=\"input-group mb-3 input-group-sm\">\r\n                <input\r\n                  v-model=\"coupon_code\"\r\n                  type=\"text\"\r\n                  class=\"form-control\"\r\n                  placeholder=\"請輸入優惠碼\"\r\n                >\r\n                <div class=\"input-group-append\">\r\n                  <button\r\n                    type=\"button\"\r\n                    class=\"btn btn-outline-secondary\"\r\n                    @click=\"addCoupon\"\r\n                  >\r\n                    套用優惠碼\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <!-- 消費總額計算 -->\r\n          <div class=\"row d-flex flex-row-reverse mt-2 mb-2\">\r\n            <div class=\"col-md-4\">\r\n              <div class=\"totalCost d-flex justify-content-between pr-1\">\r\n                <span class=\"d-inline mr-3\">消費總計</span>\r\n                <span>NT{{ cartTotal | thousands }}</span>\r\n              </div>\r\n              <div class=\"totalDiscount d-flex justify-content-between pr-1\">\r\n                <span class=\"d-inline text-success mr-3\">優惠折扣</span>\r\n                <span class=\"text-success\">NT{{ cartTotal - (cartTotal * (coupon.percent / 100)) || 0 | thousands }}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"row\">\r\n            <div class=\"col-12\">\r\n              <div class=\"totalAmount p-2\">\r\n                <p class=\"text-right\">訂單內有 <span class=\"text-danger\">{{ quantity }}</span> 件商品，\r\n                  <span>本筆訂單總金額\r\n                    <span class=\"text-danger\">{{ parseInt(cartTotal * (coupon.percent / 100)) || cartTotal | thousands }}</span>\r\n                  </span>\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"row mt-3 mb-5\">\r\n            <div class=\"col-12\">\r\n              <div class=\"row\">\r\n                <div class=\"col-6\">\r\n                  <button type=\"button\" class=\"btn btn-primary btn-block text-white rounded-0\"\r\n                    @click=\"continueShopping\">\r\n                      繼續購物\r\n                  </button>\r\n                </div>\r\n                <div class=\"col-6\">\r\n                  <button type=\"button\" class=\"btn btn-secondary text-white btn-block rounded-0\"\r\n                    @click=\"nextStep\">\r\n                      下一步\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n        <div class=\"emptyCarts d-flex justify-content-center my-7\" v-else>\r\n          <h4 class=\"mb-3 warning-text\">哎唷 ! 購物車無商品，快去逛逛\r\n            <router-link to=\"/products\"\r\n                    class=\"text-dark mt-5 mt-3\">\r\n            <i class=\"fas fa-chevron-left mr-2\"></i>\r\n              繼續購物\r\n            </router-link>\r\n          </h4>\r\n        </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'Cart',\r\n  data () {\r\n    return {\r\n      carts: [],\r\n      cartTotal: 0,\r\n      quantity: 0,\r\n      isLoading: false,\r\n      coupon: {},\r\n      coupon_code: '',\r\n      status: {\r\n        loadingItem: ''\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    // 取得購物車\r\n    getCarts () {\r\n      const url = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_UUID}/ec/shopping`\r\n      this.isLoading = true\r\n      this.$http.get(url)\r\n        .then(res => {\r\n          this.carts = res.data.data\r\n          this.quantity = res.data.data.length\r\n          this.isLoading = false\r\n          this.updateTotal()\r\n        })\r\n        .catch(() => {\r\n          this.$bus.$emit('message:push', '發生錯誤', 'danger')\r\n          this.isLoading = false\r\n        })\r\n    },\r\n    // 更新數量\r\n    updateQuantity (id, quantity) {\r\n      const url = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_UUID}/ec/shopping`\r\n      const cart = {\r\n        product: id,\r\n        quantity: quantity\r\n      }\r\n      this.$http.patch(url, cart)\r\n        .then(res => {\r\n          this.cartTotal = 0\r\n          this.getCarts()\r\n        })\r\n        .catch(() => {\r\n          this.$bus.$emit('message:push', '發生錯誤', 'danger')\r\n        })\r\n    },\r\n    // 更新總價\r\n    updateTotal () {\r\n      this.carts.forEach(item => {\r\n        this.cartTotal += item.product.price * item.quantity\r\n      })\r\n    },\r\n    // 刪除全部產品\r\n    removeAllCarts () {\r\n      const url = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_UUID}/ec/shopping/all/product`\r\n      this.$http.delete(url)\r\n        .then(res => {\r\n          this.getCarts()\r\n          this.cartTotal = 0\r\n          this.$bus.$emit('updateQuantity')\r\n        })\r\n    },\r\n    // 刪除單一產品\r\n    removeItemCart (id) {\r\n      const url = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_UUID}/ec/shopping/${id}`\r\n      this.$http.delete(url)\r\n        .then(res => {\r\n          this.getCarts()\r\n          this.$bus.$emit('updateQuantity')\r\n        })\r\n    },\r\n    // 套用優惠卷\r\n    addCoupon () {\r\n      const url = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_UUID}/ec/coupon/search`\r\n      this.$http.post(url, { code: this.coupon_code }).then(res => {\r\n        this.$bus.$emit('message:push', '成功使用此優惠券', 'success')\r\n        this.coupon = res.data.data\r\n      }).catch(() => {\r\n        if (this.coupon_code) {\r\n          this.$bus.$emit('message:push', '沒有此優惠券 ╥﹏╥', 'danger')\r\n        } else {\r\n          this.$bus.$emit('message:push', '請輸入優惠券 ╥﹏╥', 'danger')\r\n        }\r\n      })\r\n    },\r\n    continueShopping () {\r\n      this.$router.push('/products')\r\n    },\r\n    nextStep () {\r\n      this.$router.push('/customer_profile')\r\n    }\r\n  },\r\n  created () {\r\n    this.getCarts()\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Cart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Cart.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Cart.vue?vue&type=template&id=5d2b44ae&\"\nimport script from \"./Cart.vue?vue&type=script&lang=js&\"\nexport * from \"./Cart.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}